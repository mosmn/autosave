---
/**
 * Combined city landing + service type pages (Arabic â€” default locale).
 * Generates /services/[slug] for Riyadh city landing + all services.
 */
import type { City } from '../../data/cities';
import { services, type ACService } from '../../data/services';
import CityTemplate from '../../layouts/CityTemplate.astro';
import ServiceTemplate from '../../layouts/ServiceTemplate.astro';

export function getStaticPaths() {
  const cityPaths: { params: { slug: string }; props: { city: City | null; service: ACService | null; pageType: 'city' } }[] = [];

  const servicePaths = services.map((service) => ({
    params: { slug: service.slug },
    props: { city: null as City | null, service, pageType: 'service' as const },
  }));

  return [...cityPaths, ...servicePaths];
}

const { city, service, pageType } = Astro.props;
---

{pageType === 'city' && city && <CityTemplate city={city} lang="ar" />}
{pageType === 'service' && service && <ServiceTemplate service={service} lang="ar" />}
