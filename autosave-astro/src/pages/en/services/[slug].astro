---
/**
 * Combined city landing + service type pages (English).
 * Generates /en/services/[slug] for Riyadh city landing + all services.
 */
import { getCityBySlug, type City } from '../../../data/cities';
import { services, type ACService } from '../../../data/services';
import CityTemplate from '../../../layouts/CityTemplate.astro';
import ServiceTemplate from '../../../layouts/ServiceTemplate.astro';

export function getStaticPaths() {
  const riyadh = getCityBySlug('riyadh');
  const cityPaths = riyadh ? [{
    params: { slug: riyadh.slug },
    props: { city: riyadh, service: null as ACService | null, pageType: 'city' as const },
  }] : [];

  const servicePaths = services.map((service) => ({
    params: { slug: service.slug },
    props: { city: null as City | null, service, pageType: 'service' as const },
  }));

  return [...cityPaths, ...servicePaths];
}

const { city, service, pageType } = Astro.props;
---

{pageType === 'city' && city && <CityTemplate city={city} lang="en" />}
{pageType === 'service' && service && <ServiceTemplate service={service} lang="en" />}
